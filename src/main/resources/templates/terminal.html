<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" href="/webjars/xterm/4.8.1/css/xterm.css">
    <script src="/webjars/xterm/4.8.1/lib/xterm.js"></script>
    <script src="/webjars/xterm-addon-fit/0.3.0/lib/xterm-addon-fit.js"></script>
    <script src="/webjars/lodash/4.17.19/lodash.min.js"></script>
    <script src="/webjars/css-element-queries/1.2.3/src/ResizeSensor.js"></script>
    <style>
		html, body {
		  height: 100%;
		  margin: 0;
		  overflow: hidden;
		}
		#terminal {
		  height: 100%;
		  width: 100%;
		  position: relative;
		}
	</style>
    <script type="text/javascript" th:src="@{/js/terminal.js}"></script>
    <script th:inline="javascript">
    
    	const id = [[${id}]];
    	const cmd = [[${cmd}]];
    	const cwd = [[${cwd}]];
    	const theme = [[${theme}]];
    	
        document.addEventListener('DOMContentLoaded', function() {
            startTerminal(
            		'terminal',
            		id,
            		`${window.location.protocol.replace('http', 'ws')}//${window.location.host}/websocket`,
            		cmd,
            		cwd,
            		theme
            );
        });
    	
    	
    </script>
</head>
<body>
    <div id="terminal" th:style="${theme.background} != null ? 'background-color: ' + ${theme.background} + ';' : 'background-color: rgb(0,0,0);'"></div>
</body>
</html>